---
# roles-main.yml
# vim: set ff=unix ts=2 sw=2 sts=2 et : This line is VIM modeline

- name: "{{ tests_casename }} | {{ tests_rolename }} | Debug print OS-Cond"
  debug:
    msg: "{{ '%s: OS-Cond: %s.'|format(
           tests_rolename,
           os_spec|d('')|string ) }}"

- name: "{{ tests_rolename }} | Debug print OS-Spec"
  debug:
    msg: "{{ '%s: OS-Spec: %s:%s v%s(%s).'|format(
           tests_rolename,
           os_spec_os_family,os_spec_os_distribution,
           os_spec_os_version,os_spec_os_major_version ) }}"

- block:

  - name: "{{ tests_casename }} | {{ tests_rolename }} | Supported Touch"
    blockinfile:
      path: "{{ '%s/%s.%s'|format(tests_prefix_dir|d(''),tests_rolename,'supported') }}"
      state: present
      create: yes
      content: |
        {{ '%s: OS-Spec: %s:%s v%s(%s).'|format(
           tests_rolename,
           os_spec_os_family,os_spec_os_distribution,
           os_spec_os_version,os_spec_os_major_version ) }}

  when: os_spec_supported|success

- block:

  - name: "{{ tests_casename }} | {{ tests_rolename }} | Unsupported Touch"
    blockinfile:
      path: "{{ '%s/%s.%s'|format(tests_prefix_dir|d(''),tests_rolename,'unsupported') }}"
      state: present
      create: yes
      content: |
        {{ '%s: OS-Spec: %s:%s v%s(%s).'|format(
           tests_rolename,
           os_spec_os_family,os_spec_os_distribution,
           os_spec_os_version,os_spec_os_major_version ) }}

  when: os_spec_supported|failed

