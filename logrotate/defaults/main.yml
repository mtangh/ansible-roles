---
# defaults file for logrotate

# Includes OS Spec defaults
logrotate_vars: |
  {{ lookup('file','./defaults/%s.yml'|
     format(os_spec_os_family|d('default')))|from_yaml }}

# logrotate conf file path
logrotate_conf_file: "{{ logrotate_vars.logrotate_conf_file|d('/etc/logrotate.conf') }}"

# logrotate include dirrectory
logrotate_include_dir: "{{ logrotate_vars.logrotate_include_dir|d('/etc/logrotate.d') }}"

# logrotate default config
logrotate_conf_default: |
  {% if logrotate_vars.logrotate_conf_default|d(none) is not none %}{{
    logrotate_vars.logrotate_conf_default
  }}{% else %}{{ {
    'cycle': 'weekly',
    'rotate': 4,
    'create': True
  } }}{% endif %}

# logrotate log files
#
# logrotate_logfiles_{defaults|includes|appends}
#   - name:             string
#     logfiles:         log-file-path
#     cycle:            daily|weekly|monthly|yearly
#     size:             size[K|M|G]
#     minsize:          size[K|M|G]
#     rotate:           count
#     start:            count
#     extension:        extension-string
#     dateext:          yes|no
#     dateformat:       date-format
#     olddir:           path|no
#     create:           yes|no or { mode:,owner:,group: }
#     copy:             yes|no
#     copytruncate:     yes|no
#     shred:            yes|no
#     shredcycles:      count
#     compress:         yes|no
#     compresscmd:      command-path
#     uncompresscmd:    command-path
#     compressoptions:  options
#     compressext:      extension-string
#     delaycompress:    yes|no
#     missingok:        yes|no
#     ifempty:          yes|no
#     mail:             e-mail address|no
#     mailfirst:        yes
#     maillast:         yes
#     maxage:           count
#     sharedscripts:    yes|no
#     firstaction:      scripts list
#     lastaction:       scripts list
#     prerotate:        scripts list
#     postrotate:       scripts list
#

# logrotate log files in logrotate.conf
logrotate_logfiles_defaults: |
  {% if logrotate_vars.logrotate_logfiles_defaults|d(none) is not none %}{{
    logrotate_vars.logrotate_logfiles_defaults
  }}{% else %}{{ [] }}{% endif %}

# logrotate log files under the include directory
logrotate_logfiles_includes: |
  {% if logrotate_vars.logrotate_logfiles_includes|d(none) is not none %}{{
    logrotate_vars.logrotate_logfiles_includes
  }}{% else %}{{ [] }}{% endif %}

# Appending logrotate log files under the include directory
logrotate_logfiles_appends: |
  {% if logrotate_vars.logrotate_logfiles_appends|d(none) is not none %}{{
    logrotate_vars.logrotate_logfiles_appends
  }}{% else %}{{ [] }}{% endif %}

