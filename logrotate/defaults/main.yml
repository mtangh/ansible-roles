---
# defaults file for logrotate
# vim: set ff=unix ts=2 sw=2 sts=2 et : This line is VIM modeline

# Meta data for this role.
logrotate_meta: |
    {{ lookup('file',('%s/meta/main.yml'|format(role_path))|from_yaml }}

# If necessary,
# define a default value with a variable name beginning with "etc_resolver_" here.

# logrotate conf file path
logrotate_conf_file: /etc/logrotate.conf

# logrotate include dirrectory
logrotate_include_dir: /etc/logrotate.d

# logrotate default config
logrotate_conf_default:
  cycle: weekly
  rotate: 4
  create: yes

  # logrotate log files in logrotate.conf
  logfiles:

  - name: wtmp
    logfiles: /var/log/wtmp
    cycle: monthly
    minsize: 1M
    rotate: 3
    create:
      owner: root
      group: utmp
      mode: '0644'

  - name: btmp
    logfiles: /var/log/btmp
    cycle: monthly
    minsize: 1M
    rotate: 3
    create:
      owner: root
      group: utmp
      mode: '0600'

# logrotate log files
#
# logrotate_logfiles
#   {includes|packagename}
#   - name:             string
#     logfiles:         log-file-path
#     cycle:            daily|weekly|monthly|yearly
#     size:             size[K|M|G]
#     minsize:          size[K|M|G]
#     rotate:           count
#     start:            count
#     extension:        extension-string
#     dateext:          yes|no
#     dateformat:       date-format
#     olddir:           path|no
#     create:           yes|no or { mode:,owner:,group: }
#     copy:             yes|no
#     copytruncate:     yes|no
#     shred:            yes|no
#     shredcycles:      count
#     compress:         yes|no
#     compresscmd:      command-path
#     uncompresscmd:    command-path
#     compressoptions:  options
#     compressext:      extension-string
#     delaycompress:    yes|no
#     missingok:        yes|no
#     ifempty:          yes|no
#     mail:             e-mail address|no
#     mailfirst:        yes
#     maillast:         yes
#     maxage:           count
#     sharedscripts:    yes|no
#     firstaction:      scripts list
#     lastaction:       scripts list
#     prerotate:        scripts list
#     postrotate:       scripts list
#

# logrotate log files under the include directory
logrotate_logfiles:

- name: syslog
  logfiles:
  - /var/log/kern.log
  - /var/log/messages
  - /var/log/daemon.log
  - /var/log/secure
  - /var/log/maillog
  - /var/log/spooler
  - /var/log/boot.log
  - /var/log/cron
  sharedscripts: yes
  postrotate:
  - /bin/kill -HUP `cat /var/run/syslogd.pid 2>/dev/null` 2>/dev/null ||true
  - /bin/kill -HUP `cat /var/run/rsyslogd.pid 2>/dev/null` 2>/dev/null ||true

- name: rpm
  logfiles: /var/log/rpmpkgs
  cycle: weekly
  missingok: yes
  ifempty: no

- name: yum
  logfiles: /var/log/yum.log
  cycle: yearly
  size: 30k
  create:
    owner: root
    group: root
    mode: '0600'
  missingok: yes
  ifempty: no

