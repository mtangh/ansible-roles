---
# role* tasks file
# vim: set ff=unix ts=2 sw=2 sts=2 et : This line is VIM modeline

- name: "{{ tests_casename }} | {{ tests_rolename }} | main - set_fact"
  set_fact:
    ansible_os_family: "{{ test_pattern.family|d('') }}"
    ansible_distribution: "{{ test_pattern.dist|d('' }}"
    ansible_distribution_major_version: "{{ test_pattern.major|d('') }}"

- name: "{{ tests_casename }} | {{ tests_rolename }} | main - load defaults"
  include_roles:
    name: platforms
    tasks_from: defaults
  vars:
    path: "{{ role_path }}"
    exports: yes

- name: "{{ tests_casename }} | {{ tests_rolename }} | main - debug defaults"
  debug:
    var: vars_for_platforms

- name: "{{ tests_casename }} | {{ tests_rolename }} | main - validate"
  include: "tasks/tasks_{{ test_pattern.name|d('default') }}.yml"

